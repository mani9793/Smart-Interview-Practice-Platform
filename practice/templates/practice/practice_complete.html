{% extends 'base.html' %}
{% block title %}Session complete â€“ Practice{% endblock %}
{% block content %}
<div class="card card-sip shadow-sm p-4">
    <div class="text-center mb-4">
        <i class="bi bi-check-circle-fill text-success display-4"></i>
        <h1 class="page-title h3 mt-2 mb-1">Session complete</h1>
        <p class="text-muted-sip mb-0">You've answered all questions in <strong>{{ session.question_set.name }}</strong>.</p>
    </div>

    {% if responses %}
        <h2 class="h5 fw-semibold mb-3 mt-4"><i class="bi bi-chat-left-text me-2"></i>Your answers</h2>
        <div class="list-group list-group-flush">
            {% for response in responses %}
                <div class="list-group-item list-item-sip px-0 pb-4">
                    <p class="text-muted-sip small mb-1">
                        <span class="badge bg-secondary rounded-pill me-2">#{{ forloop.counter }}</span>
                        <span class="badge {% if response.question.difficulty == 'easy' %}badge-easy{% elif response.question.difficulty == 'hard' %}badge-hard{% else %}badge-medium{% endif %} rounded-pill">{{ response.question.get_difficulty_display }}</span>
                    </p>
                    <p class="fw-semibold mb-2">Question</p>
                    <div class="bg-sip-subtle rounded p-3 mb-3 text-break">{{ response.question.text|linebreaksbr }}</div>
                    <p class="fw-semibold mb-2">Your answer</p>
                    <div class="bg-sip-subtle rounded p-3 text-break">
                        {% if response.answer_text %}
                            {{ response.answer_text|linebreaksbr }}
                        {% else %}
                            <span class="text-muted-sip">No answer saved.</span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="d-flex justify-content-center gap-2 flex-wrap mt-4 pt-3 border-top">
        <a href="{% url 'practice:practice_index' %}" class="btn btn-sip-primary">
            <i class="bi bi-play-fill me-1"></i>Start another session
        </a>
        <a href="{% url 'practice:history' %}" class="btn btn-outline-primary">
            <i class="bi bi-clock-history me-1"></i>View history
        </a>
    </div>
</div>
{% endblock %}
